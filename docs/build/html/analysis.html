
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Analysis &#8212; clustertools 0.1.dev1 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="find_centre" href="api/clustertools.analysis.operations.find_centre.html" />
    <link rel="prev" title="c_to_w0" href="api/clustertools.analysis.initialize.c_to_w0.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api/clustertools.analysis.operations.find_centre.html" title="find_centre"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="api/clustertools.analysis.initialize.c_to_w0.html" title="c_to_w0"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">clustertools 0.1.dev1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Analysis</a><ul>
<li><a class="reference internal" href="#operations">Operations</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">Functions</a><ul>
<li><a class="reference internal" href="#id2">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#profiles">Profiles</a><ul>
<li><a class="reference internal" href="#id3">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#orbit">Orbit</a><ul>
<li><a class="reference internal" href="#id4">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="analysis">
<h1>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h1>
<div class="section" id="operations">
<h2>Operations<a class="headerlink" href="#operations" title="Permalink to this headline">¶</a></h2>
<p>Several operations are available within <code class="docutils literal notranslate"><span class="pre">clustertools</span></code> to perform large scale changes to a <code class="docutils literal notranslate"><span class="pre">StarCluster</span></code>, primarily related to unit and coordinate system changes. Operations are primarily meant to be called as functions internal to the <code class="docutils literal notranslate"><span class="pre">StarCluser</span></code> class (<code class="docutils literal notranslate"><span class="pre">StarCluster.operation_name()</span></code>), however it is also possible to call operations as external functions (<code class="docutils literal notranslate"><span class="pre">operation_name(StarCluster)</span></code> for cases where the operation returns information of interest (i.e. a rotation matrix). No information is returned when an operation is called internally and no variables within cluster are set when an operation is called externally.</p>
<p>An example of the difference between internal and external operation calls would be finding a cluster’s centre. One can call the function internally via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span><span class="o">.</span><span class="n">find_centre</span><span class="p">()</span>
</pre></div>
</div>
<p>When called internally, the position (cluster.xc, cluster.yc, cluster.zc) and velocity (cluster.vxc, cluster.vyc, cluster.vzc) of the cluster’s centre are set. Unless <code class="docutils literal notranslate"><span class="pre">cluster.origin=='galaxy'</span></code>, then the cluster’s centre is set equal to its galactocentric position and velocity (cluster.xgc,cluster.ygc,cluster.zgc,cluster.vxgc,cluster.vygc,cluster.vzgc).</p>
<p>Alternatively, when called externally via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xc</span><span class="p">,</span><span class="n">yc</span><span class="p">,</span><span class="n">zc</span><span class="p">,</span><span class="n">vxc</span><span class="p">,</span><span class="n">vyc</span><span class="p">,</span><span class="n">vzv</span><span class="o">=</span><span class="n">find_centre</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
</pre></div>
</div>
<p>no variables within <code class="docutils literal notranslate"><span class="pre">cluster</span></code> are actually set.</p>
<p>A change of units or coordinate system can be implemented using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span><span class="o">.</span><span class="n">to_galaxy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span><span class="o">.</span><span class="n">to_kpckms</span><span class="p">()</span>
</pre></div>
</div>
<p>It is important to note that only <code class="docutils literal notranslate"><span class="pre">rv3d</span></code> is called after a change in either units or coordinate system. By default, for computational efficiency, stars are not sorted again in the new coordinate system and key parameters are not re-calculated. If sorting and re-calculations are preferred, then be sure to set <code class="docutils literal notranslate"><span class="pre">do_order=True</span></code> and <code class="docutils literal notranslate"><span class="pre">do_key_params=True</span></code> via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span><span class="o">.</span><span class="n">to_galaxy</span><span class="p">(</span><span class="n">do_order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span><span class="o">.</span><span class="n">to_kpckms</span><span class="p">(</span><span class="n">do_key_params</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>All available operations are listed below.</p>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.find_centre" title="clustertools.analysis.operations.find_centre"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_centre</span></code></a>(cluster[, xstart, ystart, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.find_centre_of_density" title="clustertools.analysis.operations.find_centre_of_density"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_centre_of_density</span></code></a>(cluster[, xstart, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.find_centre_of_mass" title="clustertools.analysis.operations.find_centre_of_mass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_centre_of_mass</span></code></a>(cluster)</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_pckms" title="clustertools.analysis.operations.to_pckms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_pckms</span></code></a>(cluster[, do_key_params])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_kpckms" title="clustertools.analysis.operations.to_kpckms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_kpckms</span></code></a>(cluster[, do_key_params, ro, vo])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_nbody" title="clustertools.analysis.operations.to_nbody"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_nbody</span></code></a>(cluster[, do_key_params, ro, vo])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_radec" title="clustertools.analysis.operations.to_radec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_radec</span></code></a>(cluster[, do_key_params, ro, vo])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_galpy" title="clustertools.analysis.operations.to_galpy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_galpy</span></code></a>(cluster[, do_key_params, ro, vo])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_units" title="clustertools.analysis.operations.to_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_units</span></code></a>(cluster, units[, do_order, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_centre" title="clustertools.analysis.operations.to_centre"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_centre</span></code></a>(cluster[, do_order, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_cluster" title="clustertools.analysis.operations.to_cluster"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_cluster</span></code></a>(cluster[, do_order, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_galaxy" title="clustertools.analysis.operations.to_galaxy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_galaxy</span></code></a>(cluster[, do_order, do_key_params])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_sky" title="clustertools.analysis.operations.to_sky"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_sky</span></code></a>(cluster[, do_order, do_key_params])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_tail" title="clustertools.analysis.operations.to_tail"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_tail</span></code></a>(cluster[, plot])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.to_origin" title="clustertools.analysis.operations.to_origin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_origin</span></code></a>(cluster, origin[, do_order, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.save_cluster" title="clustertools.analysis.operations.save_cluster"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_cluster</span></code></a>(cluster)</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.return_cluster" title="clustertools.analysis.operations.return_cluster"><code class="xref py py-obj docutils literal notranslate"><span class="pre">return_cluster</span></code></a>(cluster, units0, origin0[, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.rotate_to_tail" title="clustertools.analysis.operations.rotate_to_tail"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rotate_to_tail</span></code></a>(cluster)</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.reset_nbody_scale" title="clustertools.analysis.operations.reset_nbody_scale"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset_nbody_scale</span></code></a>(cluster[, mass, radii, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.convert_binary_units" title="clustertools.analysis.operations.convert_binary_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convert_binary_units</span></code></a>(cluster, param, …)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.operations.html#clustertools.analysis.operations.add_rotation" title="clustertools.analysis.operations.add_rotation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_rotation</span></code></a>(cluster, qrot)</p></td>
<td><p>NAME:</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id1">
<h2>Functions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>A long list of functions exist within <code class="docutils literal notranslate"><span class="pre">clustertools</span></code> that can be called to measure a speciic property of the <code class="docutils literal notranslate"><span class="pre">StarCluster</span></code>. Similar to operations, functions can be called internally (<code class="docutils literal notranslate"><span class="pre">StarCluster.function_name()</span></code>) or externally (<code class="docutils literal notranslate"><span class="pre">function_name(StarCluster)</span></code>). When called internally, changes are made to variables within <code class="docutils literal notranslate"><span class="pre">StarCluster</span></code> with nothing returned. When called externally, some operations have data returned. For example, a cluster’s half-mass relaxation time can be called internally via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span><span class="o">.</span><span class="n">half_mass_relaxation_time</span><span class="p">()</span>
</pre></div>
</div>
<p>where the variable cluster.trh now represents the cluster’s half-mass relaxation time. Alternatively, the cluster’s half-mass relaxation time can be called externally via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trh</span><span class="o">=</span><span class="n">half_mass_relaxation_time</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
</pre></div>
</div>
<p>When called externally, no variables within <code class="xref py py-obj docutils literal notranslate"><span class="pre">cluster</span></code> are set.</p>
<p>Some functions, including <code class="docutils literal notranslate"><span class="pre">mass_function</span></code> and <code class="docutils literal notranslate"><span class="pre">eta_function</span></code> can be applied to only a sub-population of the cluster. They have an array of input parameters that allow for only certain stars to be used. For example, to measure the mass function of stars between 0.1 and 0.8 Msun within the cluster’s half-mass radius one can call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m_mean</span><span class="p">,</span> <span class="n">m_hist</span><span class="p">,</span> <span class="n">dm</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">ealpha</span><span class="p">,</span> <span class="n">yalpha</span><span class="p">,</span> <span class="n">eyalpha</span> <span class="o">=</span> <span class="n">mass_function</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span>
<span class="go">        mmin=0.1,mmax=0.8,rmin=0.,rmax=cluster.rm)</span>
</pre></div>
</div>
<p>Other constraints include velocity (<code class="docutils literal notranslate"><span class="pre">vmin</span></code>,``vmax``), energy (<code class="docutils literal notranslate"><span class="pre">emin</span></code>,``emax``) and stellar evolution type (<code class="docutils literal notranslate"><span class="pre">kwmin</span></code>,``kwmax``). Alternatively a boolean array can be passed to <code class="docutils literal notranslate"><span class="pre">index</span></code> to ensure only a predefined subset of stars is used.</p>
<p>All functions can be called using projected valeus using <code class="docutils literal notranslate"><span class="pre">projeted=True</span></code>.</p>
<p>The complete list of available functions are tabulated below in their external form.</p>
<div class="section" id="id2">
<h3>Functions<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.relaxation_time" title="clustertools.analysis.functions.relaxation_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">relaxation_time</span></code></a>(cluster[, rad, multimass, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.half_mass_relaxation_time" title="clustertools.analysis.functions.half_mass_relaxation_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">half_mass_relaxation_time</span></code></a>(cluster[, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.core_relaxation_time" title="clustertools.analysis.functions.core_relaxation_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">core_relaxation_time</span></code></a>(cluster[, multimass, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.energies" title="clustertools.analysis.functions.energies"><code class="xref py py-obj docutils literal notranslate"><span class="pre">energies</span></code></a>(cluster[, specific, i_d, full, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.closest_star" title="clustertools.analysis.functions.closest_star"><code class="xref py py-obj docutils literal notranslate"><span class="pre">closest_star</span></code></a>(cluster[, projected])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.virialize" title="clustertools.analysis.functions.virialize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">virialize</span></code></a>(cluster[, specific, full])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.virial_radius" title="clustertools.analysis.functions.virial_radius"><code class="xref py py-obj docutils literal notranslate"><span class="pre">virial_radius</span></code></a>(cluster[, method, full, H, …])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.virial_radius_inverse_distance" title="clustertools.analysis.functions.virial_radius_inverse_distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">virial_radius_inverse_distance</span></code></a>(cluster[, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.virial_radius_critical_density" title="clustertools.analysis.functions.virial_radius_critical_density"><code class="xref py py-obj docutils literal notranslate"><span class="pre">virial_radius_critical_density</span></code></a>(cluster[, H, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.mass_function" title="clustertools.analysis.functions.mass_function"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mass_function</span></code></a>(cluster[, mmin, mmax, nmass, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.eta_function" title="clustertools.analysis.functions.eta_function"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eta_function</span></code></a>(cluster[, mmin, mmax, nmass, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.functions.html#clustertools.analysis.functions.surface_area" title="clustertools.analysis.functions.surface_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">surface_area</span></code></a>(cluster[, mmin, mmax, rmin, …])</p></td>
<td><p>NAME:</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="profiles">
<h2>Profiles<a class="headerlink" href="#profiles" title="Permalink to this headline">¶</a></h2>
<p>A common measurement to make when analysing star clusters is to determine how a certain parameter varies with clustercentric distance. Therefore a list of commonly measured profiles can be measured via <code class="docutils literal notranslate"><span class="pre">clustertools</span></code>. Unlike operations and functions, profiles can only be called externally. For example, the density profile of a cluster can be measured via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rprof</span><span class="p">,</span> <span class="n">pprof</span><span class="p">,</span> <span class="n">nprof</span><span class="o">=</span> <span class="n">rho_prof</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
</pre></div>
</div>
<p>where the radial bins <code class="docutils literal notranslate"><span class="pre">rprof</span></code>, the density in each radial bin <code class="docutils literal notranslate"><span class="pre">pprof</span></code>, and the number of stars in each bin <code class="docutils literal notranslate"><span class="pre">nprof</span></code> will be returned.</p>
<p>One feature that is available for all profiles is the ability to plot the profile using <code class="docutils literal notranslate"><span class="pre">plot=True</span></code>. For example, calling</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rprof</span><span class="p">,</span> <span class="n">pprof</span><span class="p">,</span> <span class="n">nprof</span><span class="o">=</span> <span class="n">rho_prof</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>returns the below figure</p>
<img alt="_images/rho_prof.png" src="_images/rho_prof.png" />
<p>Some editing can be done to the plot via key word arguments (see PLOTTING for information regarding making figures with <code class="docutils literal notranslate"><span class="pre">clustertools</span></code>)</p>
<p>All profiles can also just be measured for a select subpopulation of stars based on mass (<code class="docutils literal notranslate"><span class="pre">mmin</span></code>,``mmax``), radius (<code class="docutils literal notranslate"><span class="pre">rmin</span></code>,``rmax``), velocity (<code class="docutils literal notranslate"><span class="pre">vmin</span></code>,``vmax``), energy (<code class="docutils literal notranslate"><span class="pre">emin</span></code>,``emax``) and stellar evolution type (<code class="docutils literal notranslate"><span class="pre">kwmin</span></code>,``kwmax``). Alternatively a boolean array can be passed to <code class="docutils literal notranslate"><span class="pre">index</span></code> to ensure only a predefined subset of stars is used.</p>
<p>All available profiles are listed below.</p>
<div class="section" id="id3">
<h3>Functions<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.profiles.html#clustertools.analysis.profiles.rho_prof" title="clustertools.analysis.profiles.rho_prof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rho_prof</span></code></a>(cluster[, mmin, mmax, rmin, rmax, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.profiles.html#clustertools.analysis.profiles.m_prof" title="clustertools.analysis.profiles.m_prof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">m_prof</span></code></a>(cluster[, mmin, mmax, rmin, rmax, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.profiles.html#clustertools.analysis.profiles.alpha_prof" title="clustertools.analysis.profiles.alpha_prof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">alpha_prof</span></code></a>(cluster[, mmin, mmax, nmass, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.profiles.html#clustertools.analysis.profiles.sigv_prof" title="clustertools.analysis.profiles.sigv_prof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sigv_prof</span></code></a>(cluster[, mmin, mmax, rmin, rmax, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.profiles.html#clustertools.analysis.profiles.beta_prof" title="clustertools.analysis.profiles.beta_prof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">beta_prof</span></code></a>(cluster[, mmin, mmax, rmin, rmax, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.profiles.html#clustertools.analysis.profiles.v_prof" title="clustertools.analysis.profiles.v_prof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_prof</span></code></a>(cluster[, mmin, mmax, rmin, rmax, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.profiles.html#clustertools.analysis.profiles.eta_prof" title="clustertools.analysis.profiles.eta_prof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eta_prof</span></code></a>(cluster[, mmin, mmax, nmass, rmin, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.profiles.html#clustertools.analysis.profiles.vcirc_prof" title="clustertools.analysis.profiles.vcirc_prof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">vcirc_prof</span></code></a>(cluster[, mmin, mmax, rmin, …])</p></td>
<td><p>NAME:</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="orbit">
<h2>Orbit<a class="headerlink" href="#orbit" title="Permalink to this headline">¶</a></h2>
<p>In cases where the <code class="docutils literal notranslate"><span class="pre">StarCluster</span></code> does not evolve in isolation, it is possible to specify both the cluster’s orbit and the the external tidal field. When orbital and tidal field information are provided, <code class="docutils literal notranslate"><span class="pre">clustertools</span></code> makes use of <code class="docutils literal notranslate"><span class="pre">galpy</span></code> to calcuate additional cluster and orbital properties.</p>
<p><strong>Cluster Properties Dependent on the External Tidal Field</strong></p>
<p>In cases where the <code class="docutils literal notranslate"><span class="pre">StarCluster</span></code> does not evolve in isolation, it is possible to specify both the cluster’s orbit and the the external tidal field. When orbital and tidal field information are provided, <code class="docutils literal notranslate"><span class="pre">clustertools</span></code> makes use of <code class="docutils literal notranslate"><span class="pre">galpy</span></code> to calcuate additional cluster properties like its tidal radius (also referred to as the Jacobi radius) or limiting radius (also referred to as the King tidal radius). The defualt external potential is always the MWPotential2014 model from <code class="docutils literal notranslate"><span class="pre">galpy</span></code>, which is an observationally motived represetnation of the Milky Way. However it is always possible to define a potential using the <code class="docutils literal notranslate"><span class="pre">pot</span></code> variable where applicable.</p>
<p>For example, the limiting radius of a cluster (radius where the density falls to background) can be measured via:</p>
<p>&gt;&gt; cluster.rlimiting(plot=True)</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">plot=True</span></code>, a figure showing the cluster’s density profile and the background density in MWPotential at the cluster’s position is returned in order to view exactly where the limiting radius is. cluster.rl is now set equal to the the measured limiting radius.</p>
<img alt="_images/rlplot.png" src="_images/rlplot.png" />
<p>Alternatively, one can define a different potential and make the calculation again:</p>
<p>&gt;&gt; cluster.rlimiting(pot=LogarithmicHaloPotential,plot=True)</p>
<img alt="_images/rlplot_log.png" src="_images/rlplot_log.png" />
<p><strong>Orbit Properties</strong></p>
<p>The majority of the orbital analysis performed in <code class="docutils literal notranslate"><span class="pre">clusertools</span></code> is just a wrapper around a <code class="docutils literal notranslate"><span class="pre">galpy</span></code> function that uses the <code class="docutils literal notranslate"><span class="pre">StarCluster</span></code> class, especially <code class="docutils literal notranslate"><span class="pre">calc_actions</span></code>,``get_cluster_orbit``, and <code class="docutils literal notranslate"><span class="pre">ttensor</span></code>. At the moment, orbital analysis can be done internally using the <code class="docutils literal notranslate"><span class="pre">StarCluster</span></code> class. Hence all orbit analysis function should be called externally. For example, one can easily initialize and integrate a cluster’s orbit, given its galactocentric coordinates are known, using:</p>
<p>&gt;&gt; orbit=initialize_orbit(cluster)
&gt;&gt; dt,orbit=integrate_orbit(cluster,tfinal=12)</p>
<p>where <code class="docutils literal notranslate"><span class="pre">tfinal=12</span></code> means that the orbit is being integrated 12 Gyr into the future. The returned orbit is also stored in <code class="docutils literal notranslate"><span class="pre">cluster.orbit</span></code> while the array dt are the times (in galpy units) for which the orbit was integrated for. <code class="docutils literal notranslate"><span class="pre">galpy</span></code> orbits can be initialized and integrated for individual stars as well, via <code class="docutils literal notranslate"><span class="pre">cluster.initialize_orbits()</span></code> and <code class="docutils literal notranslate"><span class="pre">cluster.integrate_orbits</span></code>, however this feature is likely only of interest for tail stars that are no longer bound to the cluster as orbit integration does not account for the cluster’s potential.</p>
<p>It may also be helpful to have the cluster’s orbital path within +/- dt, especially if looking at escaped stars. Arrays for the cluster’s past and future coordinates can be generated via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="o">=</span> <span class="n">orbit_path</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span><span class="n">dt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">plot=True</span></code> and dt=0.1, a figure showing all stars in the simulation as well as the orbital path +/- 0.1 Gyr in time is returned.</p>
<img alt="_images/rlplot_log.png" src="_images/rlplot_log.png" />
<p>Stars can also be matched to a point along the orbital path, where each stars distance from the path and distance along the path to the progenitor is calculated. This function effectively creates a convenient frame of reference for studying escaped stars.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tstar</span><span class="p">,</span><span class="n">dprog</span><span class="p">,</span><span class="n">dpath</span> <span class="o">=</span> <span class="n">orbit_path_match</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span><span class="n">dt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">plot=True</span></code>, a figure showing <code class="docutils literal notranslate"><span class="pre">dpath</span></code> vs <code class="docutils literal notranslate"><span class="pre">dprog</span></code> is returned.</p>
<p><strong>Tidal Tails</strong></p>
<p>Since stars which escape a cluster do so with velocities slightly larger or smaller than the progenitor cluster, tidal tails will not follow the cluster’s orbit path. Therefore <code class="docutils literal notranslate"><span class="pre">clustertools</span></code> can generate a tail path by first matching stars to the cluster’s orbital path (as above) and then binning stars based on their distance from the progenitor along the path. The mean coordinates of stars in each bin marks the tail path. Similar to a cluster’s orbital path, <code class="docutils literal notranslate"><span class="pre">clustertools</span></code> can also match stars to the tail path as well.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="o">=</span> <span class="n">tail_path</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span><span class="n">dt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/rlplot_log.png" src="_images/rlplot_log.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tstar</span><span class="p">,</span><span class="n">dprog</span><span class="p">,</span><span class="n">dpath</span> <span class="o">=</span> <span class="n">tail_path_match</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span><span class="n">dt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/rlplot_log.png" src="_images/rlplot_log.png" />
<p>A complete list of all functions related to a cluster’s orbit can be found below.</p>
<div class="section" id="id4">
<h3>Functions<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.rtidal" title="clustertools.analysis.orbit.rtidal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rtidal</span></code></a>(cluster[, pot, rtiterate, …])</p></td>
<td><p>Calculate rtidal.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.rlimiting" title="clustertools.analysis.orbit.rlimiting"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rlimiting</span></code></a>(cluster[, pot, rgc, ro, vo, nrad, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.initialize_orbit" title="clustertools.analysis.orbit.initialize_orbit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">initialize_orbit</span></code></a>(cluster[, from_centre, ro, vo])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.initialize_orbits" title="clustertools.analysis.orbit.initialize_orbits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">initialize_orbits</span></code></a>(cluster[, ro, vo])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.integrate_orbit" title="clustertools.analysis.orbit.integrate_orbit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">integrate_orbit</span></code></a>(cluster[, pot, tfinal, nt, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.orbit_interpolate" title="clustertools.analysis.orbit.orbit_interpolate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orbit_interpolate</span></code></a>(cluster, dt[, pot, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.orbital_path" title="clustertools.analysis.orbit.orbital_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orbital_path</span></code></a>(cluster[, dt, nt, pot, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.orbital_path_match" title="clustertools.analysis.orbit.orbital_path_match"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orbital_path_match</span></code></a>(cluster[, dt, nt, pot, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.tail_path" title="clustertools.analysis.orbit.tail_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tail_path</span></code></a>(cluster[, dt, nt, pot, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.tail_path_match" title="clustertools.analysis.orbit.tail_path_match"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tail_path_match</span></code></a>(cluster[, dt, nt, pot, …])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.get_cluster_orbit" title="clustertools.analysis.orbit.get_cluster_orbit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_cluster_orbit</span></code></a>([gcname, ro, vo])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.calc_actions" title="clustertools.analysis.orbit.calc_actions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calc_actions</span></code></a>(cluster[, pot, ro, vo])</p></td>
<td><p>NAME:</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="reference/clustertools.analysis.orbit.html#clustertools.analysis.orbit.ttensor" title="clustertools.analysis.orbit.ttensor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ttensor</span></code></a>(cluster[, pot, ro, vo, eigenval])</p></td>
<td><p>NAME:</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api/clustertools.analysis.operations.find_centre.html" title="find_centre"
             >next</a> |</li>
        <li class="right" >
          <a href="api/clustertools.analysis.initialize.c_to_w0.html" title="c_to_w0"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">clustertools 0.1.dev1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Jeremy J. Webb.
      Last updated on 22 Jun 2020.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>